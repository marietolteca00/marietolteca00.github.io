{
  "hash": "373c95df414e39c53b9622eccab92393",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Eaton and Palisades Wildfire Perimeter in Los Angeles\"\ndescription: \"Blog post mapping and analyzing the 2025 Eaton and Palisades wildfire perimeters using Landsat imagery.\"\nauthor:\n  - name: Marie Tolteca\n    affiliation: Master of Environmental Data Science Program at The Bren School (UCSB)\n    affiliation-url: https://ucsb-meds.github.io/\ndate: \"2025-12-03\"\ncategories: [Quarto, R, MEDS]\ncitation:\n  url: https://marietolteca00.github.io/blog_post/LA_wildfire_post\nimage: satellite_image.jpeg\ndraft: false\n---\n\nGithub: https://github.com/marietolteca00/eds220-hwk4.git\n\n### Background\nThe Eaton and Palisades fires were two recent major wildfires that started from strong Santa Ana winds, dry vegetation from previous wet winters, and potential issues with electrical transmission lines. Both wildfires started simultaneously in Los Angeles County on Janurary 07, 2025. These wildfires burned around 60 square miles and destroying thousands of vegetation and structures. As well as a 37,000 acres burned between the Eaton and Palisades wildfires.\n\n### Purpose\nA `nc` will be used for the raster (landsat) of Los Angeles County where two wildfires occured during the year 2025. The first is a simplified collection of bands (red, green, blue, near-infrared and shortwave infrared) from the Landsat Collection 2 Level-2 atmosperically adjusted surface reflectance data, obtained by the Landsat 8 satellite. Using the wildfire shapefiles project them onto the Landsat to view where the fires occured.\n\n### About Data\nMicrosoft Planetary Computer, https://planetarycomputer.microsoft.com/dataset/landsat-c2-l2, is used in this notebook that outlines the fire perimeters for the Palisades and Eaton Fire. This was our data landsat data for the fire perimeters. `landsat8-2025-02-23-palisades-eaton.nc`\n\nFrom the County of Los Angeles GIS, https://egis-lacounty.hub.arcgis.com/maps/ad51845ea5fb4eb483bc2a7c38b2370c/about, was retrieved for both fire perimeters of `Palisades` and `Eaton` fire as a shapefile (shp) each were added to a folder. \n\n- `eaton_boundary`:` Layer contains a dissolved fire perimeter for the eaton fire. (01/21/2025)\n- `palisades_boundary`: Layer contains a dissolved fire perimeter for the palisades fire. (01/21/2025)\n- `landsat`: This `nc` file contains a collection of bands (red, blue, green, near-infrared, and shortwave infrared) from the Landsat Collection 2 Level-2 atmosperically adjusted surface reflectance data, obtained by the Landsat 8 satellite. This data has been clipped to an area of Los Angeles County to include both fire perimeters.\n\nThis repository contains code and materials for analyzing Landsat imagery and mapping wildfire perimeters in Los Angeles County. It demonstrates how to:\n- Work with NetCDF (.nc) Landsat data\n- Read and reproject shapefiles\n- Create true-color (RGB) and false-color composites\n- Overlay geospatial data to visualize fire boundaries\n- Generate publication-quality figures\n- Develop clear and reproducible geospatial workflows\n\nThe focus is on the Eaton and Palisades Fires, combining satellite imagery with official fire perimeter shapefiles to explore fire-affected areas.\n\n### Highlights:\n- Data Exploration\n- Restoring geospatial information\n- True Color Image\n- False color image\n\n\n# Data\n- The Landsat .nc file can be downloaded from a shared Google Drive folder provided by the instructor for the course EDS 220 – Working with Environmental Datasets:\n[Google Drive Link](https://drive.google.com/drive/folders/1USqhiMLyN8GE05B8WJmHabviJGnmAsLP)\n- Fire perimeter shapefiles for the Palisades and Eaton fires were obtained from the County of Los Angeles GIS:\nCounty [GIS Link](https://egis-lacounty.hub.arcgis.com/maps/ad51845ea5fb4eb483bc2a7c38b2370c/about)\n- Each shapefile contains a dissolved fire perimeter for its respective fire and has been added to the data folder in this repository.\n\n## Repository Structure:\n- **When downloading data, add the data folder to `.gitignore` to reduce pushing big files onto github.**\n\n├── Chwk4-task2-false-color-TOLTECA.ipynb\n├── README.md\n└── data\n    ├── landsat8-2025-02-23-palisades-eaton.nc\n    ├── Palisades_Perimeter_20250121.shp\n    │   └── palisades_perimeter.md\n    └── Eaton_Perimeter_20250121.shp\n        └── eaton_perimeter.md\n\n\n\n# Packages Used:\nThis notebook uses the following Python packages: `contextily`, `os`,  `numpy`, `matplotlib.pyplot`, `matplotlib.patches`, `geopandas`, `rioxarray`, and `xarray`.\n\n\n* Code Chunk - `CMD+SHIFT+I`\n\n# Import Libraries\n\n::: {#363f9c10 .cell execution_count=1}\n``` {.python .cell-code}\nimport contextily as ctx\nimport os\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport matplotlib.patches as mpatches\nimport geopandas as gpd\nimport rioxarray\nimport xarray as xr\n```\n:::\n\n\n# Import data\n\n::: {#9be76cfa .cell execution_count=2}\n``` {.python .cell-code}\n# Import landsat `nc` file\nlandsat = xr.open_dataset('data/landsat8-2025-02-23-palisades-eaton.nc')\n\n# Import fire shapefile data\nfp = os.path.join('data/eaton_perimeter/Eaton_Perimeter_20250121.shp')\neaton = gpd.read_file(fp)\nfp = os.path.join('data/palisades_perimeter/Palisades_Perimeter_20250121.shp')\npalisades = gpd.read_file(fp)\n\ncalifornia = gpd.read_file(os.path.join(\"data/EJI_2024_California/EJI_2024_California.gdb\"))\n\n```\n:::\n\n\n# Data Wrangling \n\n::: {#26cd3649 .cell execution_count=3}\n``` {.python .cell-code}\n# Lower column titles on dataframes\nfor df in [palisades, eaton]:\n    df.columns = df.columns.str.lower()\n    \n# Match CRS\neaton.crs == palisades.crs  # False\n\ncalifornia = california.to_crs(palisades.crs) # Transform CRS\n\ncalifornia.crs == palisades.crs # True / Match\n\n# Join    \npalisadesjoin = gpd.sjoin(california,palisades)\neatonjoin = gpd.sjoin(california, eaton)\n\n# Clipping \npalisades_clip = gpd.clip(california, palisades)\neaton_clip = gpd.clip(california, eaton)\n```\n:::\n\n\n# Check Landsat.nc file\n\n::: {#075591f3 .cell execution_count=4}\n``` {.python .cell-code}\n# Check CRS of Landsat\nprint(f\"CRS:, {landsat.rio.crs}\")\n\n# Extract CRS using spatial_ref variable\nwkt = landsat.spatial_ref.crs_wkt\nprint(\"\\nCRS WKT from spatial_ref:\")\nprint(wkt)\n\n# Write the CRS to the dataset - geospatial information and spatial reference\nlandsat = landsat.rio.write_crs(wkt, inplace=False)\n\n# Verify CRS is now attached\nprint(\"\\nCRS after writing:\", landsat.rio.crs)\n\n\n# Fill NA Values into collection of bands Red, green, and blue. This allows for `no NaN` error message to be removed.\n#  Substitue any NAN values as 0\nlandsat_filled = landsat.fillna(0)\n\n# Add fillna() back into rgb\nrgb_filled = landsat_filled[[\"red\", \"green\", \"blue\"]].to_array()\n\n# Assign numpy array to a variable\nfalse_color = landsat[[\"swir22\", \"nir08\", \"red\"]].to_array()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nCRS:, None\n\nCRS WKT from spatial_ref:\nPROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]\n\nCRS after writing: EPSG:32611\n```\n:::\n:::\n\n\n# Transform CRS from Eaton and Palisades fire to match landsat\n\n::: {#c772a453 .cell execution_count=5}\n``` {.python .cell-code}\n# Transform Fire Perimeters to match landsat\neaton = eaton.to_crs(landsat.rio.crs)\npalisades = palisades.to_crs(landsat.rio.crs)\n\n# Check transformation\nprint(\"Eaton CRS:\", eaton.crs) # EPSG:32611\nprint(\"Palisades CRS:\", palisades.crs) # EPSG:32611\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nEaton CRS: PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]\nPalisades CRS: PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]\n```\n:::\n:::\n\n\n# Create Map 1\nThis map will create a False-Color imagery generated along with both fire perimeters, eaton and palisades boundary, using landsat. \n\n::: {#feadba6d .cell execution_count=6}\n``` {.python .cell-code}\n# Set up fig, ax\nfig, ax = plt.subplots(figsize=(10,10))\n\n# Plot false-color background first\nfalse_color.plot.imshow(robust=True)\n\n# Overlay fire perimeters\neaton.boundary.plot(ax=ax, color=\"hotpink\", linewidth=2, label=\"Eaton Fire\", facecolor = \"lightpink\", alpha = 0.6)\npalisades.boundary.plot(ax=ax, color=\"red\", linewidth=2, label=\"Palisades Fire\", facecolor = \"indianred\", alpha = 0.6)\n\n\n# Add label for Eaton fire perimeter\nax.text(eaton.geometry.centroid.iloc[0].x,\n        eaton.geometry.centroid.iloc[0].y,\n        \"Eaton Fire\", color=\"black\", fontsize=10, weight=\"bold\", bbox=dict(facecolor='lightgrey', alpha=0.5, pad=5))\n\n# Add labels for Palisades fire perimeter\nax.text(palisades.geometry.centroid.iloc[0].x,\n        palisades.geometry.centroid.iloc[0].y,\n        \"Palisades Fire\", color=\"black\", fontsize=10, weight=\"bold\", bbox=dict(facecolor='lightgrey', alpha=0.5, pad=5))\n\n\n# Zoom to fire extents - This is for the bound limits\nxmin = min(eaton.total_bounds[0], palisades.total_bounds[0]) - 500\nxmax = max(eaton.total_bounds[2], palisades.total_bounds[2]) + 500\nymin = min(eaton.total_bounds[1], palisades.total_bounds[1]) - 500\nymax = max(eaton.total_bounds[3], palisades.total_bounds[3]) + 500\n\n# Set limits\nax.set_xlim(xmin, xmax)\nax.set_ylim(ymin, ymax) \n\n# Title\nax.set_title(\"SWIR-NIR-Red False Color Composite with Fire Perimeters\")\n\n# Legend\nax.legend(loc = \"upper left\")\nax.set_axis_off()\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-7-output-1.png){width=763 height=316}\n:::\n:::\n\n\n#### Interpretation\nIn this figure we are able to clearly see the areas that were affected by the wildfire that happened in Los Angeles County. With the false color imagery, it uses SWIR22 for red, NIR08 for green, and the Red band for blue. Bright green areas indicate healthy vegetation, while brown or muted areas correspond to bare ground or soil. The fire-affected regions are visible within the outlined perimeters. The fire perimeter of Palisades fire (red) and Eaton fire (pink) are identified by the colored boundary and an added text for easier identification. In this figure we are able to view both landscapes in Los Angeles and the fire perimeters that most recently occured.\n\n\n# Map 2\n\n::: {#b6aa0b65 .cell execution_count=7}\n``` {.python .cell-code}\nfig, ax = plt.subplots(1, 1, figsize=(14, 12))\n\n# Fire Perimeter- Eaton\neaton_clip.plot(ax=ax, color='orange', alpha=0.3)  # Inside\neaton_clip.plot(ax=ax, color='none', edgecolor='red', linewidth=1.5)  # Border\n\n# Fire Perimeter- Palisades\npalisades_clip.plot(ax=ax, color='blue', alpha=0.3)  # Inside\npalisades_clip.plot(ax=ax, color='none', edgecolor='darkblue', linewidth=1.5)  # Border\n\n# Legend Patches\npal_legend = mpatches.Patch(facecolor=\"blue\", edgecolor=\"darkblue\", alpha=0.3, label=\"Palisades Fire\")\neaton_legend = mpatches.Patch(facecolor=\"orange\", edgecolor=\"red\", alpha=0.3, label=\"Eaton Fire\")\n\n# Legend\nax.legend(handles=[eaton_legend, pal_legend], \n          loc=\"upper left\",\n          title=\"Fire Perimeters\",\n          # Background of legend\n          frameon=True)\n\n# Title\nax.set_title(\"2025 Eaton and Palisades Fire\")\n\n# Axes off\nax.axis('off')\n\n# Basemap\nctx.add_basemap(ax, source=ctx.providers.OpenStreetMap.Mapnik)\n\nplt.show()\n\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-8-output-1.png){width=1061 height=428}\n:::\n:::\n\n\n#### Interpretation\nIn this figure, the Eaton and Palisades fire perimeters are displayed on an OpenStreetMap basemap. Unlike the earlier Landsat imagery, this basemap highlights roads, highways, and city boundaries, making it easier to understand the fires’ locations relative to surrounding communities and infrastructure.\n\n# Map 2\nUsing the 2024 Environmental Justice Index data for California in the geodatabase data format, `EJI_2024_California`, plot the fire perimeters of Eaton and Palisades to showcasing Housing Units, Occupied by Renters.\n\n::: {#50805996 .cell execution_count=8}\n``` {.python .cell-code}\nfig, (ax1, ax2) = plt.subplots(1, 2, figsize=(20, 10))\n\n# UPDATE WITH YOU EJI VARIABLE FROM STEP 1\neji_variable = 'E_RENTER'\n\n# Find common min/max for legend range\nvmin = min(palisades_clip[eji_variable].min(), eaton_clip[eji_variable].min())\nvmax = max(palisades_clip[eji_variable].max(), eaton_clip[eji_variable].max())\n\n# Plot census tracts within Palisades perimeter\npalisades_clip.plot(\ncolumn= eji_variable,\nvmin=vmin, vmax=vmax,\nlegend=False,\nax=ax1,\ncmap = 'inferno')\n\nax1.set_title('Palisades Fire')\nax1.axis('off')\n\n# Plot census tracts within Eaton perimeter\neaton_clip.plot(\ncolumn=eji_variable,\nvmin=vmin, vmax=vmax,\nlegend=False,\nax=ax2,\ncmap='inferno')\n\nax2.set_title('Eaton Fire')\nax2.axis('off')\n\n# Add overall title\nfig.suptitle('Percentage of housing units that are renter occupied')\n\n# Add shared colorbar at the bottom\nsm = plt.cm.ScalarMappable(norm=plt.Normalize(vmin=vmin, vmax=vmax), cmap = 'inferno')\ncbar_ax = fig.add_axes([0.25, 0.08, 0.5, 0.02]) # [left, bottom, width, height]\ncbar = fig.colorbar(sm, cax=cbar_ax, orientation='horizontal')\ncbar.set_label('Percentile of Housing Units, Occupied by Renter')\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-9-output-1.png){width=1507 height=924}\n:::\n:::\n\n\n#### Interpretation\nIn this figure we can notice in the palisades fire perimeter more homes are renter occupied units along the coast. This could be because these are more of a tourism located and can be aimed for people who look for a couple nights to stay. In the Eaton fire perimeter more homes are along the southwestern portion than renter occupied homes. Most of the fire perimeter is none occupied due to mountain ranges.\n\n\n# References\n- Assignment 4: Palisades & Eaton Fires. EDS 220 – Working with Environmental Datasets, 2025. https://meds-eds-220.github.io/EDS-eds-220-course/assignments/assignment4-palisades-eaton-fires.html. Accessed 17 Nov. 2025.\n- Microsoft Planetary Computer. Planetary Computer. (n.d.). https://planetarycomputer.microsoft.com/dataset/landsat-c2-l2\n- NPR. Satellite image ©2025 Maxar Technologies (January 9, 2025). https://www.kpbs.org/news/national/2025/01/09/photos-see-the-california-wildfires-destructive-force-in-satellite-images\n- Palisades and Eaton dissolved fire perimeters (2025). County of Los Angeles Enterprise GIS. (2025, January 21). https://egis-lacounty.hub.arcgis.com/maps/ad51845ea5fb4eb483bc2a7c38b2370c/about\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {}
  }
}